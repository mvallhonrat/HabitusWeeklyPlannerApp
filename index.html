<!DOCTYPE html>

<html lang="es">
<head>
<!-- Etiquetas Open Graph para redes sociales -->
<meta content="Habitus - Planificador Semanal" property="og:title"/>
<meta content="Organiza tu semana con claridad y propÃ³sito con Habitus." property="og:description"/>
<meta content="https://mvallhonrat.github.io/HabitusWeeklyPlannerApp/icons/icon-514x5154.png" property="og:image"/>
<meta content="website" property="og:type"/>
<meta content="https://mvallhonrat.github.io/HabitusWeeklyPlannerApp/" property="og:url"/>
<!-- Etiquetas Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="Habitus - Planificador Semanal" name="twitter:title"/>
<meta content="Organiza tu semana con claridad y propÃ³sito con Habitus." name="twitter:description"/>
<meta content="https://mvallhonrat.github.io/HabitusWeeklyPlannerApp/icons/icon-514x5154.png" name="twitter:image"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<meta content="#4f46e5" name="theme-color"/>
<meta content="Planificador Semanal basado en la Matriz de Prioridades" name="description"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<title data-i18n="title">Habitus - Planificador Semanal</title>
<!-- Cargar Tailwind CSS desde CDN -->
<div class="bg-white rounded-lg shadow-md p-4 mb-6 max-w-2xl mx-auto text-center">
<div class="flex justify-center mb-4 px-4 sm:px-6">
<div class="flex flex-col items-center justify-center mb-4 px-4 text-center">
<img alt="Logo Habitus" class="w-24 h-24 object-contain mb-2" src="icons/icon-192x192.png"/>
<h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-1" data-i18n="title">Planificador Semanal</h1>
</div>
</div>
<div class="mb-6" id="pasaje-inspirador">
<div class="text-gray-700 text-center mt-2" id="verso-contenedor">
<!-- The inspirational quote will be loaded here dynamically -->
</div>
</div></div><script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3"></script>
<link href="manifest.json" rel="manifest"/>
<link href="icons/icon-192x192.png" rel="apple-touch-icon"/>
<style>
    /* Optimizaciones para mÃ³vil */
    @media (max-width: 640px) {
      .text-2xl {
        font-size: 1.5rem;
      }
      .text-xl {
        font-size: 1.25rem;
      }
      .p-4 {
        padding: 0.75rem;
      }
      /* Aumentar tamaÃ±o de elementos interactivos para mÃ³vil */
      button, input[type="text"], select, textarea {
        min-height: 44px;
      }
      /* Aumentar espaciado entre elementos */
      .space-y-1 > * + * {
        margin-top: 0.5rem;
      }
    }

    /* Mejorar rendimiento tÃ¡ctil */
    .touch-manipulation {
      touch-action: manipulation;
    }

    /* Prevenir selecciÃ³n de texto en elementos interactivos */
    .no-select {
      user-select: none;
    }

    /* Estilos para modo standalone en iOS */
    @supports (-webkit-touch-callout: none) {
      .ios-standalone {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
      }
    }
  </style>
<link rel="stylesheet" href="styles.css">
<link href="./icons/icon-192x192.png" rel="icon" type="image/png"/></head>
<body class="bg-gray-50 text-gray-800 p-4 antialiased ios-standalone">
<div class="absolute top-4 right-4 text-sm text-gray-600" id="langSelector">
<button class="mx-1 text-xl" onclick="setLanguage('es')" title="EspaÃ±ol">ğŸ‡ªğŸ‡¸</button>
<button class="mx-1 text-xl" onclick="setLanguage('en')" title="English">ğŸ‡ºğŸ‡¸</button>
</div>
<!-- TÃ­tulo principal -->
<!-- Recuadro de instrucciones - Colapsable en mÃ³vil -->
<div class="bg-blue-100 border-l-4 border-blue-500 text-blue-900 p-3 mb-4 rounded">
<div class="flex items-center cursor-pointer gap-2" onclick="toggleInstructions()">
<button class="text-blue-700 hover:text-blue-900" id="instructionsToggle">â–¼</button>
<h3 class="font-medium no-select" data-i18n="instructions_title">ğŸ“– Instrucciones de uso</h3>
</div>
<div class="mt-2" id="instructionsContent">
<ul class="list-disc list-inside text-sm space-y-2">
<li data-i18n="inst_1">ğŸ­ <strong>Define tus Roles:</strong> Identifica los roles importantes en tu vida (por ejemplo: Padre, Profesional, Amigo). Estos serÃ¡n las categorÃ­as bajo las cuales organizarÃ¡s tus tareas semanales.</li>
<li data-i18n="inst_2">ğŸ“ <strong>Agrega tus Tareas:</strong> Para cada rol, aÃ±ade las tareas que deseas realizar esta semana. Escribe una breve descripciÃ³n y asigna el cuadrante correspondiente segÃºn su urgencia e importancia.</li>
<li data-i18n="inst_3">ğŸ”¢ Prioriza con los Cuadrantes: Utiliza la Matriz de Prioridades (I-IV) para clasificar cada tarea:</li>
<div class="ml-6 mt-1 text-sm" data-i18n="inst_3_sub">
    <ul class="list-none ml-4 mt-1">
        <li data-i18n="inst_4">I â€“ Urgente e Importante (hacer de inmediato).</li>
        <li data-i18n="inst_5">II â€“ No Urgente e Importante (planificar tiempo para hacer).</li>
        <li data-i18n="inst_6">III â€“ Urgente y No Importante (intentar delegar o minimizar).</li>
        <li data-i18n="inst_7">IV â€“ No Urgente y No Importante (evitar en lo posible).</li>
    </ul>
</div>
<li data-i18n="inst_8">âœ… <strong>Marca las Completadas:</strong> A medida que termines cada tarea, mÃ¡rcala como realizada con la casilla de verificaciÃ³n.</li>
<li data-i18n="inst_9">ğŸ”„ <strong>Vista de Roles/Cuadrantes:</strong> Alterna entre la vista agrupada por roles o por cuadrantes usando las pestaÃ±as para obtener diferentes perspectivas de tus tareas.</li>
<li data-i18n="inst_10">ğŸ“Š <strong>Revisa tus MÃ©tricas:</strong> Al finalizar la semana, revisa el resumen de tareas completadas y pendientes, y reflexiona sobre tu semana en RevisiÃ³n Semanal.</li>
<li data-i18n="inst_11">ğŸ“‹ <strong>Exporta y Reinicia:</strong> Guarda un registro de tu semana utilizando Exportar MÃ©tricas y Exportar Tareas. Luego comienza una nueva semana con el botÃ³n Nueva Semana: solo las tareas completadas se removerÃ¡n, las pendientes permanecerÃ¡n para la siguiente semana.</li>
</ul>
</div>
</div>
<!-- SecciÃ³n de Roles -->
<div class="mb-6">
<h2 class="text-xl font-semibold mb-2 no-select" data-i18n="roles">ğŸ­ Definir Roles</h2>
<div class="flex gap-2">
<input class="border rounded px-3 py-2 flex-1 touch-manipulation" data-i18n-placeholder="placeholder_role" id="roleInput" placeholder="Nuevo rol..." type="text"/>
<button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 active:bg-blue-700 touch-manipulation" data-i18n="add_role" id="addRoleBtn">
        â• AÃ±adir Rol
      </button>
</div>
<div class="mt-2 space-y-1" id="rolesList"><!-- Lista de roles dinÃ¡micos --></div>
</div>
<!-- Controles: pestaÃ±as y formulario -->
<div class="mb-4">
<!-- PestaÃ±as Roles / Cuadrantes -->
<div class="flex border-b border-gray-300 mb-3 no-select">
<button class="flex-1 px-3 py-3 text-sm font-medium text-gray-700 border-b-2 border-indigo-500 touch-manipulation" data-i18n="tabs_roles" id="tabRoles">Por Roles</button>
<button class="flex-1 px-3 py-3 text-sm font-medium text-gray-600 hover:text-gray-800 border-b-2 border-transparent touch-manipulation" data-i18n="tabs_quadrants" id="tabQuadrants">Por Cuadrantes</button>
</div>
<!-- Recordatorio de la Ãºltima revisiÃ³n -->
<div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-900 p-3 mb-4 text-sm italic hidden" id="lastReviewBox">
      ğŸ“Œ <strong>Recuerda esto de la semana anterior:</strong> <span id="lastReviewText"></span>
</div>
<!-- Formulario de nueva tarea -->
<div class="mb-2">
<label class="block text-sm font-medium mb-1" data-i18n="label_task" for="taskInput">Nueva Tarea:</label>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2">
<input class="border rounded px-3 py-2 text-sm w-full touch-manipulation" data-i18n-placeholder="placeholder_task" id="taskInput" placeholder="DescripciÃ³n de la tarea" type="text"/>
<select class="border rounded px-3 py-2 text-sm w-full touch-manipulation" id="roleSelect">
<option disabled="" selected="" value="">Rol</option>
</select>
<select class="border rounded px-3 py-2 text-sm w-full touch-manipulation" id="quadrantSelect">
<option disabled="" selected="" value="">Cuadrante</option>
<option value="1">I - Urgente/Importante</option>
<option value="2">II - No Urgente/Importante</option>
<option value="3">III - Urgente/No Importante</option>
<option value="4">IV - No Urgente/No Importante</option>
</select>
<button class="bg-green-500 text-white text-sm px-3 py-2 rounded hover:bg-green-600 active:bg-green-700 w-full touch-manipulation" data-i18n="add_task_button" id="addTaskBtn">
          âœ”ï¸ AÃ±adir Tarea
        </button>
</div>
</div>
</div>
<!-- Vistas de tareas -->
<div class="mb-6 overflow-x-hidden" id="rolesView"></div>
<div class="mb-6 hidden overflow-x-hidden" id="quadrantsView"></div>
<!-- SecciÃ³n de grÃ¡ficos -->
<div class="mb-6">
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-lg font-semibold mb-2" data-i18n="metric_quadrants">Tareas por Cuadrante</h3>
<div class="w-full h-[300px]">
<canvas id="chartQuadrants"></canvas>
</div>
</div>
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-lg font-semibold mb-2" data-i18n="chart_title_completion">Completadas vs Pendientes</h3>
<div class="w-full h-[300px]">
<canvas id="chartCompletion"></canvas>
</div>
</div>
</div>
</div>
<!-- SecciÃ³n de revisiÃ³n y controles -->
<div class="mb-4">
<label class="block text-sm font-medium mb-1" data-i18n="label_review" for="reviewInput">ğŸ“ RevisiÃ³n semanal:</label>
<textarea class="w-full border rounded px-3 py-2 text-sm touch-manipulation" data-i18n-placeholder="placeholder_review" id="reviewInput" placeholder="Escribe aquÃ­ una reflexiÃ³n sobre tu semana..." rows="3"></textarea>
<button class="mt-3 bg-purple-600 text-white text-sm font-medium px-4 py-3 rounded hover:bg-purple-700 active:bg-purple-800 w-full sm:w-auto touch-manipulation" data-i18n="new_week" id="newWeekBtn">
      ğŸŒ… Nueva Semana
    </button>
</div>
<!-- SecciÃ³n de mÃ©tricas histÃ³ricas -->
<div class="mb-6">
<h2 class="text-xl font-semibold mb-4">ğŸ“Š MÃ©tricas HistÃ³ricas</h2>
<!-- Resumen de mÃ©tricas actuales -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-sm font-medium text-gray-500" data-i18n="metric_total">Total de Tareas</h3>
<p class="text-2xl font-bold" id="totalTasks">0</p>
</div>
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-sm font-medium text-gray-500" data-i18n="metric_percent">Porcentaje Completado</h3>
<p class="text-2xl font-bold" id="completionPercentage">0%</p>
</div>
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-sm font-medium text-gray-500" data-i18n="metric_roles">Roles Activos</h3>
<p class="text-2xl font-bold" id="activeRoles">0</p>
</div>
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-sm font-medium text-gray-500" data-i18n="metric_quadrants">Tareas por Cuadrante</h3>
<div class="grid grid-cols-2 gap-2 mt-2">
<div>
<span class="text-xs text-red-500">Q1:</span>
<span class="text-sm font-medium" id="q1Count">0</span>
</div>
<div>
<span class="text-xs text-green-500">Q2:</span>
<span class="text-sm font-medium" id="q2Count">0</span>
</div>
<div>
<span class="text-xs text-yellow-500">Q3:</span>
<span class="text-sm font-medium" id="q3Count">0</span>
</div>
<div>
<span class="text-xs text-gray-500">Q4:</span>
<span class="text-sm font-medium" id="q4Count">0</span>
</div>
</div>
</div>
</div>
<!-- GrÃ¡ficos histÃ³ricos -->
<div class="grid grid-cols-1 gap-4">
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-lg font-semibold mb-2" data-i18n="chart_completion_title">Porcentaje de Completado por Semana</h3>
<div class="w-full h-[300px]">
<canvas id="chartHistoricalCompletion"></canvas>
</div>
</div>
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-lg font-semibold mb-2" data-i18n="chart_quadrants_title">Tareas por Cuadrante por Semana</h3>
<div class="w-full h-[300px]">
<canvas id="chartHistoricalQuadrants"></canvas>
</div>
</div>
<div class="bg-white p-4 rounded shadow-sm">
<h3 class="text-lg font-semibold mb-2" data-i18n="chart_roles_title">Roles Activos por Semana</h3>
<div class="w-full h-[300px]">
<canvas id="chartHistoricalRoles"></canvas>
</div>
</div>
</div>
</div>
<!-- Botones de exportaciÃ³n -->
<div class="mb-4 grid grid-cols-2 gap-2">
  <button class="bg-gray-300 text-gray-800 text-sm px-4 py-3 rounded hover:bg-gray-400 active:bg-gray-500 touch-manipulation" data-i18n="export_metrics" id="exportMetricsBtn">
    ğŸ“¥ Exportar MÃ©tricas
  </button>
  <button class="bg-gray-300 text-gray-800 text-sm px-4 py-3 rounded hover:bg-gray-400 active:bg-gray-500 touch-manipulation" data-i18n="export_tasks" id="exportTasksBtn">
    ğŸ“¥ Exportar Tareas
  </button>
</div>
<!-- BotÃ³n de migraciÃ³n -->
<div class="mb-4">
  <button id="migrateDataBtn" class="bg-blue-500 text-white text-sm px-4 py-3 rounded hover:bg-blue-600 active:bg-blue-700 w-full touch-manipulation">
    ğŸ”„ Migrar Datos Existentes
  </button>
</div>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3"></script>
<script src="translations.js"></script>
<script src="app.js"></script>
<script src="roles.js"></script>
<script src="tasks.js"></script>
<script src="translations.json" type="application/json" id="translations-data"></script>
<script src="passages.json" type="application/json" id="passages-data"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize modules
    App.init();
    Translations.init();
    Roles.init();
    Tasks.init();
    
    // Load translations and inspirational quote
    Translations.loadTranslations().then(() => {
        Translations.updateInspirationalQuote();
    });
    
    // Register service worker
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
                console.log('ServiceWorker registration successful');
            })
            .catch(err => {
                console.log('ServiceWorker registration failed: ', err);
            });
    }

    // Set up export buttons
    document.getElementById('exportMetricsBtn')?.addEventListener('click', () => Tasks.exportMetrics());
    document.getElementById('exportTasksBtn')?.addEventListener('click', () => Tasks.exportTasks());
});
</script>
